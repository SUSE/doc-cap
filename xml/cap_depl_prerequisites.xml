<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter
[
  <!ENTITY % entities SYSTEM "entity-decl.ent">
    %entities;
]>
<chapter version="5.0" xml:id="cha.cap.depl.req"
  xmlns="http://docbook.org/ns/docbook"
  xmlns:xi="http://www.w3.org/2001/XInclude"
  xmlns:xlink="http://www.w3.org/1999/xlink">
 <info>
  <title>&productname; Prerequisites</title>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker></dm:bugtracker>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
 </info>
 <para>
These are the minimum prerequisites to set up &productname;. All of these commands
and configurations are performed on the Kubernetes nodes, unless noted otherwise.
 </para>
  <variablelist>
	<varlistentry>
	  <term>
	    A working &suse; &caasp; installation
	  </term>
	<listitem>
	  <para>
	    This needs a minimum of four physical or virtual nodes: one admin, one 
        Kubernetes master, and two Kubernetes minions. (See the 
        <link xlink:href="https://www.suse.com/documentation/suse-caasp-1/">CaaSP documentation)</link>
	  </para>
	</listitem>
	</varlistentry>
    	<varlistentry>
	  <term>
	    Kubernetes API versions 1.5.x-1.6.x
	  </term>
	<listitem>
        <para>
            Find your Kubernetes version by running the command <command>
                kubectl version --short</command> on any Kubernetes node.
	  </para>
	</listitem>
	</varlistentry>
    <varlistentry>
	  <term>
          The kernel parameter swapaccount=1 must be set
	  </term>
	<listitem>
        <para>
            This should already be set in <filename>/etc/default/grub</filename>. 
            Look for the line <literal>GRUB_CMDLINE_LINUX_DEFAULT="swapaccount=1".</literal> 
	  </para>
	</listitem>
	</varlistentry>
    <varlistentry>
	  <term>
          docker info must not show aufs as the storage driver
	  </term>
	<listitem>
        <para>
            <command>docker info| grep 'Storage Driver'</command> should return 
            <literal>Storage Driver: btrfs</literal>, and not 
            <literal>Storage Driver: aufs</literal>.
	  </para>
	</listitem>
	</varlistentry>
    <varlistentry>
	  <term>
         NTP or systemd-timesyncd must be installed and active
	  </term>
	<listitem>
        <para>
          NTP is set up during the &caasp; installation, and systemd-timesyncd 
          runs on the Kubernetes nodes. Use the <command>ps</command> command 
          to verify:
          <screen>ps ax | grep 'ntp\|timesyncd'
1121 ?  Ssl  0:00 /usr/lib/systemd/systemd-timesyncd</screen>
	  </para>
	</listitem>
	</varlistentry>
 </variablelist>

</chapter>